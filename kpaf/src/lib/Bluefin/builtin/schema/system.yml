#系统模式

#------------------------------------------------------------------------------
#有限状态表

$user_status:
  comment: '用户状态'
  states:
    unactive: '未激活'
    active: '正常'
    disabled: '已禁用'

$group_status:
  comment: '用户组状态'
  states:
    active: '正常'
    disabled: '已禁用'

#------------------------------------------------------------------------------
#数据实体定义

user:
  comment: '用户'
  with: [ auto_uuid, create_timestamp, created_by, logical_deletion ]
  has:
    user_name: idname
    password: password|$=salted_md5(password_salt)
    password_salt: digits|+8|=@@auto
    status: user_status|=unactive
    profile|?: person.personal_profile
    group|+: group
  keys:
    user_name|u: user_name

group:
  comment: '用户组'
  with: [ auto_uuid, self_cascade, create_timestamp, created_by, logical_deletion ]
  has:
    group_name: idname
    display_name: text|>=1|<=20
    status: group_status|=active
  keys:
    group_name|u: group_name

user_setting:
  comment: '用户个人设置'
  with: [ auto_increment_id ]
  has:
    user: user
    name: text|<=255|c=属性名称
    value: text|<20K|c=属性值
  keys:
    user_setting|u: [ user, name ]